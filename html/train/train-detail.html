<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>课程详情</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<link rel="stylesheet" href="../../css/mui.min.css">
		<link href="../../css/style.css" rel="stylesheet" />
		<style>
			.mui-bar{box-shadow: none;}
			.mui-card .mui-control-content {
				padding: 10px;

			}

			.mui-control-content {
				height: 150px;
				padding: 5px 10px;
			}
			.mui-segmented-control{border-color: #ccc; border-left: none; border-right: none; border-radius: 0; padding: 5px 0;}
			.mui-segmented-control .mui-control-item{ color: #333; border-color: #ddd; overflow: visible;}
			.mui-segmented-control .mui-control-item.mui-active{ color: #755fc3; background: none; position: relative; }
			.mui-segmented-control .mui-control-item.mui-active::after{
				content: "";
				width: 100%;
				position: absolute;
				bottom:-5px;
				left: 0;
				border-bottom: 1px solid #755fc3;
			}
			.choose-type{margin-top:10px;}
			.mui-pull-right{
				padding: 12px 4px;
			}
		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">课程详情</h1>
			<a id="fabu" class="mui-pull-right">编辑详情</a>
		</header>
		<div class="mui-content">
			<img src="../../images/my/bg.png" id="headerImg" alt="" width="100%" />
			<div class="choose-type">
				<div id="segmentedControl" class="mui-segmented-control">
					<a class="mui-control-item mui-active" href="#item1">课程详情</a>
					<a class="mui-control-item" href="#item2">课程安排</a>
					
					
				</div>
			</div>
			<div>
				<div id="item1" class="mui-control-content mui-active">
					
				</div>
				<div id="item2" class="mui-control-content">
					
				</div>
				
			</div>
		</div>
		<script src="../../js/mui.min.js"></script>
		<script src="../../js/utils.config.js"></script>
		<script src="../../js/utils.extend.js"></script>
		<script src="../../js/utils.storages.js" ></script>
		<script src="../../js/utils.category.js" ></script>
		<script src="../../js/utils.auth.js"></script>
		<script src="../../js/utils.request.js"></script>
		<script>
			(function($, doc) {
				var courseId = null;
				$.init();
				$('#scroll').scroll({
					indicators: true //是否显示滚动条
				});
				$.plusReady(function() {
					
				  window.addEventListener('refresh', function(e){
		            window.reload();
		          });

		          window.addEventListener('train-id', function(e){
		            courseId = e.detail.id;
		            if(courseId){
						ajaxData( courseId );
					}else{
						mui.toast("获取id失败");
					}
		          });
				
				 
				 document.getElementById("fabu").addEventListener('tap', function(event){
		            $.openWindow({
		                url: './train-upload.html',
		                id: 'KZ-TRAIN-UPLOAD',
						extras:{ courseId  : courseId},
		                show: {
		                  aniShow: 'pop-in'
		                },

		                waiting: {
		                  autoShow: true
		                }
		             });
		         });
					
				});
			
				
				
			}(mui, document));
			
			function ajaxData( courseId ){
				var courseId = courseId?courseId:2;
				request.loginAjax('Curriculum/details', {
					
					data: {
						id: courseId,
					},
					showMsg: false,
					
				}, function(data, success) {
     
		      	  if ( success ){
		      	  	document.getElementById("headerImg").setAttribute("src",data.image);
		      	    document.getElementById("item1").innerHTML = "<div class='content'>"+data.contents+"</div>";
					
		      	  }
//		      	  document.getElementById("item1").innerText = JSON.stringify(data);
		      	});
		      	
		      	
		      	//课程安排
//		      	request.loginAjax('Curriculum/getSubjectsList', {
//					
//					data: {
//						groupid: courseId,
//					},
//					showMsg: false,
//					
//				}, function(data, success) {
//   
//		      	  if ( success ){
//		      		cosnole.log(JSON.stringify(data))
//					document.getElementById("item2").innerText = "无";
//		      	  }
//
//		      	});
			}
		</script>
		
	</body>

</html>