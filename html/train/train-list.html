<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>在线课堂</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<link rel="stylesheet" href="../../css/mui.min.css">
		<link href="../../css/style.css" rel="stylesheet" />
		<style>
			#sliderSegmentedControl{
				border-bottom:1px solid #d2d2d2;
				margin-bottom: 10px;
				height: 50px;
				background-color: #ffffff;
			}
			.mui-segmented-control.mui-scroll-wrapper {
				height: 50px;
				overflow: auto !important;
			}
			.mui-segmented-control .mui-control-item {
				line-height: 50px;
				display: inline-block;
				position: relative;
			}
			.mui-segmented-control .mui-control-item:after {
				content: '';
				position: absolute;
				width: 1px;
				height: 20px;
				right: 0;
				bottom: 15px;
				background-color: #d6d6d6;
			}
			.mui-segmented-control .mui-control-item:last-child:after {
				width: 0;
			}
			.mui-segmented-control.mui-segmented-control-inverted .mui-control-item.mui-active {
				color: #765fc3;
			}
			.mui-segmented-control.mui-segmented-control-inverted .mui-control-item.mui-active:before {
				content: '';
				position: absolute;
				width: 100%;
				height: 3px;
				left: 0;
				bottom: -1px;
				background-color: #765fc3;
			}
			.mui-fullscreen .mui-segmented-control~.mui-slider-group {
				top: 60px;
				background-color: #ffffff;
			}
			.mui-slider .mui-segmented-control.mui-segmented-control-inverted~.mui-slider-group .mui-slider-item {
				border: 0;
			}
  </style>
  <style>
			.mui-row {
				padding: 5px 10px;
				margin-bottom: 10px;
				border-bottom: 1px solid #d6d6d6;
				border-top: 1px solid #d6d6d6;
			}
			.mui-row .img {
				width: 110px;
				height: 100px;
				display: inline-block;
			}
			.mui-row .img img {
				width: 100%;
				height: 100%;
			}
			.mui-row .content {
				float: right;
				width: calc(100% - 120px);
				width: -webkit-calc(100% - 120px);
			}
			.mui-row .content h1 {
				font-size: 18px;
				font-weight: normal;
				color: #000000;
				margin-bottom: 5px;
				line-height: inherit;
			}
			.mui-row .content p {
				line-height: 20px;
				font-size: 14px;
				color: #7c7c7c;
			}
			.mui-row .content .btns {
				text-align: right;
			}
			.mui-row .content .btns button {
				color: #ffffff;
				line-height: 35px;
				padding: 0 10px;
				background-color: #765fc3;
				border: 0;
				-webkit-border-radius: 5px;
				-moz-border-radius: 5px;
				border-radius: 5px;
			}
		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">在线课堂</h1>
		</header>
		<div class="mui-content">
			<div class="mui-slider mui-fullscreen">
				<div class="mui-scroll-wrapper mui-slider-indicator mui-segmented-control mui-segmented-control-inverted">
					<div id="sliderSegmentedControl" class="mui-scroll">
            <a class="mui-control-item mui-active" href="#content1">
              口腔种植
            </a>
            <a class="mui-control-item" href="#content2">
              口腔正畸
            </a>
            <a class="mui-control-item" href="#content3">
              口腔修复
            </a>
            <a class="mui-control-item" href="#content4">
              口腔外科
            </a>
            <a class="mui-control-item" href="#content5">
              口腔内科
            </a>
            <a class="mui-control-item" href="#content6">
              口腔美容
            </a>
					</div>
				</div>
				<div class="mui-slider-group" id="sliderSegmentedContent">
					<div id="conten1" class="mui-slider-item mui-control-content mui-active">
						<div class="mui-scroll-wrapper">
							<div class="mui-scroll">
							  <div class="contents">
    								<div class="mui-row">
    									<div class="img">
    										<img src="../../images/my/bgy.png" />
    									</div>
    									<div class="content">
    										<h1>视频名称</h1>
    										<p>发布时间：2017-11-21</p>
    										<p>观看人数：100</p>
    										<div class="btns">
    											<button>观看人数</button>
    										</div>
    									</div>
    						    </div>
    								<div class="mui-row">
    									<div class="img">
    										<img src="../../images/my/bgy.png" />
    									</div>
    									<div class="content">
    										<h1>视频名称</h1>
    										<p>发布时间：2017-11-21</p>
    										<p>观看人数：100</p>
    										<div class="btns">
    											<button>观看人数</button>
    										</div>
    									</div>
    						    </div>
						    </div>
							</div>
						</div>
					</div>
          <div id="content2" class="mui-slider-item mui-control-content">
            <div class="mui-scroll-wrapper">
              <div class="mui-scroll"><div class="contents"></div></div>
            </div>
          </div>
          <div id="content3" class="mui-slider-item mui-control-content">
            <div class="mui-scroll-wrapper">
              <div class="mui-scroll"><div class="contents"></div></div>
            </div>
          </div>  
          <div id="content4" class="mui-slider-item mui-control-content">
            <div class="mui-scroll-wrapper">
              <div class="mui-scroll"><div class="contents"></div></div>
            </div>
          </div>  
          <div id="content5" class="mui-slider-item mui-control-content">
            <div class="mui-scroll-wrapper">
              <div class="mui-scroll"><div class="contents"></div></div>
            </div>
          </div>
          <div id="content6" class="mui-slider-item mui-control-content">
            <div class="mui-scroll-wrapper">
              <div class="mui-scroll"><div class="contents"></div></div>
            </div>
          </div>  					
				</div>
			</div>
		</div>
		<script src="../../js/mui.min.js"></script>
    <script src="../../js/mui.pullToRefresh.js"></script>
    <script src="../../js/mui.pullToRefresh.material.js"></script>
    <script src="../../js/utils.config.js"></script>
    <script src="../../js/utils.extend.js"></script>
    <script src="../../js/utils.storages.js" ></script>
    <script src="../../js/utils.category.js" ></script>
    <script src="../../js/utils.auth.js"></script>
    <script src="../../js/utils.request.js"></script>
		<script>
			(function($, doc) {
				$.init();
				//阻尼系数
				var deceleration = mui.os.ios?0.003:0.0009;
				$('.mui-scroll-wrapper').scroll({
					bounce: false,
					indicators: true, //是否显示滚动条
					deceleration:deceleration
				});
				$.plusReady(function() {
  	        var limit = 5;
          var groupid = 0;
          var listRequest = {};
				  // 分类
          var category = categorys.get();
          if (category.length > 0) {
            var controls = doc.getElementById("sliderSegmentedControl");
            var contents = doc.getElementById("sliderSegmentedContent");
            var controlsHtml = [];
            var contentsHtml = [];
            $.each(category, function(index, item) {
              var _controlHtml = '<a groupid={0} class="mui-control-item" href="#content{1}">{2}</a>';
              _controlHtml = _controlHtml.format(item.id,index,item.title);
              controlsHtml.push(_controlHtml);
              var _contentHtml = '';
              _contentHtml += '<div id="content{0}" class="mui-slider-item mui-control-content">'+
                              ' <div class="mui-scroll-wrapper">'+
                              '  <div class="mui-scroll">'+
                              '   <div class="contents">'+
                              '   </div>'+
                              '  </div>'+
                              ' </div>'+
                              '</div>';
              _contentHtml = _contentHtml.format(index, index);
              contentsHtml.push(_contentHtml);
            });
            controls.innerHTML = controlsHtml.join('');
            contents.innerHTML = contentsHtml.join('');
            controls.querySelector('.mui-control-item').classList.add('mui-active');
            contents.querySelector('.mui-control-content').classList.add('mui-active');
            // 初始加载项目
            groupid = category[0].id;
          }
          // 切换tab
          doc.querySelector('.mui-slider').addEventListener('slide', function(event) {
            var contentValue = event.detail.slideNumber;
            var currentTab = doc.querySelector('.mui-control-item.mui-active');
            groupid = currentTab.getAttribute('groupid');
            if (listRequest[groupid]) {
              return;
            }
          });
          //循环初始化所有下拉刷新，上拉加载。
          $.each(doc.querySelectorAll('.mui-slider-group .mui-scroll'), function(index, pullRefreshEl) {
            $(pullRefreshEl).pullToRefresh({
              down: {
                callback: function() {
                  var self = this;
                  getList(1, function() {
                    self.endPullDownToRefresh();
                    $(pullRefreshEl).pullToRefresh().refresh(true);
                  });
                }
              },
              up: {
                callback: function() {
                  var self = this;
                  if (listRequest[groupid]) {
                    if (listRequest[groupid].more === true) {
                      var page = listRequest[groupid].page + 1;
                      getList(page, function(){
                        self.endPullUpToRefresh(false);
                      })
                      return;
                    }
                  }
                  self.endPullUpToRefresh(true);
                }
              }
            });
          });
				});
			}(mui, document));
		</script>
	</body>

</html>