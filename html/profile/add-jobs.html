<!DOCTYPE html>
<html class="ui-page-my">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
	<title></title>
	<link href="../../css/mui.min.css" rel="stylesheet" />
	<link href="../../css/mui.picker.min.css" rel="stylesheet">
	<link href="../../css/mui.poppicker.css" rel="stylesheet">
	<link href="../../css/style.css" rel="stylesheet" />
<style>
	.mui-input-row label{ width: 90px;}
	.mui-input-row label~input{width: calc(100% - 90px); width: -webkit-calc(100% - 90px);}
	.mui-content{padding-bottom: 40px;}
	.mui-input-row .mui-pull-right1{ font-style: normal; color: #333; text-align: right;  height: 100%; display: block; －webkit－user-select ：none ; border:none!important;}
	.mui-input-row i.mui-pull-right1{ padding-right: 35px;}
	.mui-input-row input.mui-pull-right1{ padding-right: 35px;}
	#businessLicense img{ width: 100%;}
	#businessLicense { height: 120px; overflow: hidden; background: #eee;}
	.btn-box{ margin:20px 10px;}
	.mui-input-group .mui-input-row.nolimit{
		height: auto;
	}
	.mui-input-group .mui-input-row.nolimit label{
		float: none;
	}
	.mui-input-group{
		padding-bottom: 10px;	
	}
	.mui-input-group:after{ display: none;}
	textarea{
		font-size: 14px;
		color:#333;
	}
</style>

</head>

<body>
<header class="mui-bar mui-bar-nav">
	<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
	<h1 class="mui-title">公司信息维护</h1>
</header>
<div class="mui-content">
<form class="mui-input-group">
	<div class="mui-input-row">
		<label>职位类型：</label>
		<input id="positiontype" type="text" class="m-data mui-input-clear mui-pull-right1" placeholder="请输入职位类型">
	</div>
	<div class="mui-input-row">
		<label>职位名称：</label>
		<i id="professional" class="m-data popPicker mui-pull-right1">请选择</i>
	</div>
	<div class="mui-input-row">
		<label>所在地区：</label>
		<i id="region" class="m-data popPicker mui-pull-right1">请选择</i>
	</div>
	<div class="mui-input-row">
		<label>公司地址：</label>
		<input id="address" type="text" class="m-data mui-input-clear mui-pull-right1" placeholder="请输入详细公司地址">
	</div>
	<!--<div class="mui-input-row">
		<label>工资待遇：</label>
		<i id="professional" class="m-data mui-pull-right1">请选择</i>
	</div>-->
	<div class="mui-input-row">
		<label>招聘人数：</label>
		<input id="nums" type="text" class="m-data mui-input-clear mui-pull-right1" placeholder="请输入招聘人数">
	</div>
	<div class="mui-input-row">
		<label>招聘类型：</label>
		<i id="nature" class="m-data popPicker mui-pull-right1">请选择</i>
	</div>
	<div class="mui-input-row">
		<label>工作经验：</label>
		<i id="experience" class="m-data popPicker mui-pull-right1">请选择</i>
	</div>
	<div class="mui-input-row">
		<label>学历要求：</label>
		<i id="education" class="m-data popPicker mui-pull-right1">请选择</i>
	</div>
	
	<textarea id="descriptions" rows="5" class="m-data " placeholder="公司描述"></textarea>


</form>
<div id="saveData" class="btn btn-bottom">发布</div>
</div>
<script src="../../js/mui.min.js"></script>
<script src="../../js/mui.picker.min.js"></script>
<script src="../../js/mui.poppicker.js"></script>
<script src="../../js/utils.enums.js"></script>
<script src="../../js/utils.config.js"></script>
<script src="../../js/utils.storages.js"></script>
<script src="../../js/utils.auth.js"></script>
<script src="../../js/utils.upload.js"></script>
<script src="../../js/utils.request.js" ></script>

<script>(function($, doc) {
			

	$.init();
	$.plusReady(function() {
		
		var jobsName = [{value:'前端工程师',text:'前端工程师'},{value:'JAVA',text:'JAVA'}];
		var region = [{value:'重庆',text:'重庆'},{value:'成都',text:'成都'}];
		var natureType = [{value:'全职',text:'全职'},{value:'兼职',text:'兼职'}];
		var experienceYear = [{value:'1年',text:'1年'},{value:'2年',text:'2年'},{value:'3年',text:'3年'},{value:'4年',text:'4年'},{value:'5年',text:'5年'}];
		var educationType = [{value:'本科',text:'本科'},{value:'专科',text:'专科'},{value:'其他',text:'其他'}];
		
		var dataArr = [ jobsName , region , natureType , experienceYear , educationType ];
		
		$('.popPicker').each(function( index ){
			
			var that = this;
			this.addEventListener("tap", function(){
				var picker = new $.PopPicker();
				picker.setData( dataArr[index] );
				picker.show(function(e) { 
					that.innerHTML = e[0].text;
					that.setAttribute("data-data",e[0].value);
				})
			});
		})
		
		document.getElementById('saveData').addEventListener("tap", function(){
			var data = collectionData();
		
			saveData( data );
		});
		

		function collectionData(){
			var data = {};
			var mData = document.querySelectorAll(".m-data");
			[].forEach.call(mData,function( ele ){
			
				var id = ele.getAttribute("id"),dt = ele.value||ele.getAttribute("url")||ele.getAttribute("data-data")||'';
				data[ id ] = dt;
			});
			
			return data;
		}
		
		
		
		function saveData( postData ){
			
			request.loginAjax('personalposition/saveCompanyPositionByVIP', {

				data: {
					"field": postData
				}

			}, function(data, success) {

				if(success) {
					mui.toast("保存成功");
					//返回上一级
					console.log( data );
				}
			});
		}
		
		var imageurl = null;

		function uploadImage(target , name) {
			setTimeout(function() {
				upload.showImgActionSheet(function(data) {
					var url = config.url + "Uploads/Files";
					upload.uploadimge(url, data.divid, function(res) {

						imageurl = res[0].showUrl;
						target.innerHTML = "<img id="+name+" src=" + imageurl + ">"

					});
				});
			}, 500);
		}


	});

}(mui, document));
</script>
</body>

</html>